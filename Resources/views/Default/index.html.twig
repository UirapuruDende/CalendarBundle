<html>
<head>
    <title>FullCalendar with Dende/CalendarBundle demo</title>

{% block javascripts %}
    {% set lang = calendarLang is defined ? calendarLang : 'pl' %}

    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>
    <script src='{{ asset("bundles/dendecalendar/js/jquery.min.js") }}'></script>
    <script src='{{ asset("bundles/dendecalendar/js/moment.js") }}'></script>
    <script src='{{ asset("bundles/dendecalendar/js/fullcalendar.js") }}'></script>
    <script src='{{ asset("bundles/dendecalendar/js/lang/" ~ lang ~ ".js") }}'></script>

    <script>
        $(document).ready(function() {
            var eventClickHandler = function() {};

            var newSelectionHandler = function(start, end) {
                var message = "Dodać nowe wydarzenie?\n\nPoczątek:\t"
                        +start.format("YYYY.MM.DD [o] HH:mm")
                        +"\nKoniec:\t"
                        +end.format("YYYY.MM.DD [o] HH:mm");

                if(confirm(message)) {
                    window.location = Routing.generate('dende_calendar_default_addevent')
                }
            };

            $('#calendar').fullCalendar({
                defaultView: 'agendaWeek',
                allDaySlot: false,
                slotDuration: '00:30:00',
                minTime: '06:00:00',
                maxTime: '24:00:00',
                timeZone: '{{ calendarTimezone is defined ? calendarTimezone : 'Europe/Warsaw' }}',
                slotLabelFormat: 'H:00',
                snapDuration: '00:15:00',
                selectable: true,
                select: newSelectionHandler,
                lang: '{{ lang }}',
                eventClick: eventClickHandler,
                events: Routing.generate('dende_calendar_default_getevents')
            })
        });
    </script>
{% endblock javascripts %}

{% block stylesheets %}
    <link rel='stylesheet' href="{{ asset('bundles/dendecalendar/css/fullcalendar.css') }}" />
{% endblock stylesheets %}
</head>

<body>
    <div id='calendar'></div>
</body>
</html>
